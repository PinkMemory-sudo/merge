MQ的使用场景：

* 异步：有些事情是可以同时做的。为什么不使用多线程？

* 解耦：使用多线程来做异步，所有东西都写在了一块，不容易维护

* 削峰

  

# 缺点：



## 重复消费

由于一个消费者消费失败需要重试，但是有多个消费者监听这个消息，会导致其他消费者重复消费。



幂等：使用相同参数重复执行，并能获得相同结果的函数，即**同样的参数调用接口，调用多少次结果都是一个**。处理之前先判断是否消费过，加消息ID，判断该消息有没有消费过。





* 怎么保证消费者消费成功：分布式事务
* 重复消费：
* 消息丢失
* 顺序消费



**消息的顺序消费**



脑裂



































