# 主从复制原理





# 一主一从的搭建



**大致流程**

1. 修改配置文件，指定server-id，开启binlog日志
2. 主机创建用于主从复制的账号并授权
3. 从机执行命令连接到主机
4. 启动同步



## 修改配置



### Master

必选

```
#[必须]主服务器唯一ID
server-id=1
#[必须]启用二进制日志,指名路径。比如：自己本地的路径/log/mysqlbin
log-bin=atguigu-bin
```

可选

```
#[可选] 0（默认）表示读写（主机），1表示只读（从机）
read-only=0
#设置日志文件保留的时长，单位是秒
binlog_expire_logs_seconds=6000
#控制单个二进制日志大小。此参数的最大和默认值是1GB
max_binlog_size=200M
#[可选]设置不要复制的数据库
binlog-ignore-db=test
#[可选]设置需要复制的数据库,默认全部记录。比如：binlog-do-db=atguigu_master_slave
binlog-do-db=需要复制的主数据库名字
#[可选]设置binlog格式
binlog_format=STATEMENT
```





### Slaver

**必选**

```
#[必须]从服务器唯一ID
server-id=2
```



**可选**

```
#[可选]启用中继日志
relay-log=mysql-relay
```







































